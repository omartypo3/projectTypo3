{namespace flux=FluidTYPO3\Flux\ViewHelpers}
{namespace v=FluidTYPO3\Vhs\ViewHelpers}

<div xmlns:flux="http://fedext.net/ns/flux/ViewHelpers" xmlns:f="http://typo3.org/ns/fluid/ViewHelpers" xmlns="http://www.w3.org/1999/xhtml" lang="en">

    <f:layout name="Content"/>

    <f:section name="Configuration">
        <flux:form id="downloadButton" label="Downlad Button Box"
                   description="Use this item to create a download box"
                   options="{icon: '/typo3conf/ext/theme/Resources/Public/Icons/Content/downloadbox.png', wizardTab: 'FCE', sorting: 2}">

            <flux:field.input name="headline" label="Headline" />
            <flux:field.text name="description" label="Description" enableRichText="TRUE"/>
            <flux:field.input name="buttontext" label="Buttontext" required="true"/>
            <flux:field.input name="buttonlink" label="Link" required="true"><flux:wizard.link/></flux:field.input>

            <flux:field.select name="backgroundColor" label="Background Color" items="{background-black:'Black', background-white:'White',background-gray:'Gray'}" default="background-gray" size="1" maxItems="1"/>
            <flux:field.select name="width" label="Width" items="{col-md-4:'25%', col-md-6:'50%', col-md-8:'75%', col-md-12:'100%'}" default="col-md-4" size="1" maxItems="1"/>

        </flux:form>
    </f:section>

    <f:section name="Preview">
        <small><i>Download Button Box</i></small>
        <div class="fce-text">
            {headline}
            {link}
        </div>
    </f:section>

    <f:section name="Main">
        <div class="section-downloadBtnBoxWrap {backgroundColor}wrap">
            <div class="section section-downloadBtnBox {backgroundColor} {width}">
                <f:if condition="{headline}">
                    <h4 class="heading">{headline}</h4>
                </f:if>
                <f:if condition="{description}">
                    <div class="fce-text description">
                        {description -> f:format.html()}
                    </div>
                </f:if>
                <f:if condition="{buttonlink}">
                    <f:then>
                        <div class="right">
                            <f:if condition="{buttonlink -> v:math.round()} > 0">
                                <f:then>
                                    <f:link.page pageUid="{buttonlink}" class="button centred-button button-rounded button-fce">
                                        {buttontext}
                                    </f:link.page>
                                </f:then>
                                <f:else>
                                    <f:link.typolink parameter="{buttonlink}" class="button centred-button button-rounded button-fce">
                                        {buttontext}
                                    </f:link.typolink>
                                </f:else>
                            </f:if>
                        </div>
                    </f:then>
                </f:if>
            </div>
        </div>
    </f:section>
</div>